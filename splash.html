<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Protogen AI - Enhanced</title>
<style>
/* COMPLETE CSS */
* { margin:0; padding:0; box-sizing:border-box; font-family:'Arial', sans-serif; }
body { overflow:hidden; transition:0.3s; background:#0d0d0f; color:#f1f1f1; }
body.light { --bg:#f5f5f5; --text:#111; --card:#ffffffcc; --sidebar:#ffffff; --input:#eee; }
body.dark { --bg:#0d0d0f; --text:#f1f1f1; --card:#1a1a1ccc; --sidebar:#111; --input:#222; }
body { background: var(--bg); color: var(--text); transition: all 0.4s ease; }

#navbar { position:fixed; top:0; left:0; right:0; height:60px; display:flex; align-items:center; justify-content:space-between; padding:0 20px; background:linear-gradient(90deg,#ff0080,#7928ca); color:white; box-shadow:0 4px 20px #0007; z-index:300; }
#navbar .logo { font-size:24px; font-weight:bold; letter-spacing:1px; }
#navbar .menu { cursor:pointer; font-size:24px; }
#sidebar { position: fixed; top:60px; left:0; width:280px; height:calc(100vh - 60px); background: var(--sidebar); box-shadow: 4px 0 30px #0005; padding:20px; display:flex; flex-direction:column; gap:15px; transform: translateX(0); transition:0.5s ease; z-index:200; overflow-y:auto; }
#sidebar.closed { transform: translateX(-100%); }
.title { font-size:28px; font-weight:bold; background: linear-gradient(90deg,#ff00ff,#00ffff); -webkit-background-clip:text; background-clip:text; color:transparent; }
.sidebar-info p { font-size:14px; margin:5px 0; }
.button, #sendBtn, #uploadBtn, #modeToggle { padding:12px 20px; border-radius:12px; border:none; cursor:pointer; font-weight:bold; transition:0.3s; background:linear-gradient(45deg,#ff0,#f0f,#0ff,#0f0,#f00); background-size:400% 400%; color:white; animation: gradientBG 6s ease infinite; }
.button:hover, #sendBtn:hover, #uploadBtn:hover, #modeToggle:hover { transform:scale(1.05); }
@keyframes gradientBG { 0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%} }
#personalitySelect { padding:10px; border-radius:8px; background:#333; color:white; border:none; width:100%; }
#main { margin-left:280px; margin-top:60px; height:calc(100vh - 60px); display:flex; flex-direction:column; transition:0.5s ease; }
#sidebar.closed ~ #main { margin-left:0; }
#chatBox { flex:1; padding:20px; overflow-y:auto; display:flex; flex-direction:column; gap:12px; min-height: 0; }
.msg { max-width:70%; padding:14px 18px; border-radius:20px; backdrop-filter:blur(10px); word-break:break-word; opacity:0; transform:translateY(20px); animation: fadeIn 0.5s forwards; display:flex; gap:10px; align-items:flex-start; }
.user { background: linear-gradient(120deg,#00f,#0ff); color:white; margin-left:auto; box-shadow:0 4px 12px #00f5; flex-direction:row-reverse; }
.ai { background: var(--card); border:1px solid #ffffff22; box-shadow:0 4px 12px #fff2; }
.avatar { width:40px; height:40px; border-radius:50%; background:linear-gradient(45deg,#ff0080,#00ffff); display:flex; align-items:center; justify-content:center; font-size:20px; flex-shrink:0; }
#inputArea { display:flex; padding:12px; gap:10px; background: var(--sidebar); flex-shrink: 0; }
#prompt { flex:1; padding:14px; border-radius:12px; border:none; outline:none; background: var(--input); color: var(--text); }
.file-preview { display:flex; align-items:center; gap:10px; padding:8px 12px; border-radius:10px; background: var(--card); border:1px solid #ffffff22; animation: fadeIn 0.5s forwards; }
.file-preview img { max-width:50px; max-height:50px; border-radius:6px; object-fit:cover; }
.file-preview button { background:red; border:none; color:white; border-radius:6px; padding:4px 8px; cursor:pointer; }
.modal { position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); display:flex; justify-content:center; align-items:center; opacity:0; pointer-events:none; transition:0.3s; z-index:400; }
.modal.show { opacity:1; pointer-events:all; }
.modal-content { background: var(--card); padding:30px 20px; border-radius:20px; text-align:center; max-width:400px; animation: fadeIn 0.5s forwards; }
.modal-content h2 { margin-bottom:15px; color: var(--text); }
.modal-content p { margin:10px 0; color: var(--text); }
.modal-content button { margin-top:20px; padding:10px 30px; background:linear-gradient(45deg,#ff0080,#7928ca); color:white; border:none; border-radius:8px; cursor:pointer; }
#chatBox::-webkit-scrollbar { width:8px; }
#chatBox::-webkit-scrollbar-thumb { background:#888; border-radius:4px; }
#chatBox::-webkit-scrollbar-track { background:#333; }
@keyframes fadeIn { to { opacity:1; transform:translateY(0); } }
.typing { background: var(--card); color:#888; font-style:italic; padding:10px; border-radius:20px; max-width:70%; animation: fadeIn 0.5s forwards; }

@media (max-width: 768px) {
  body { overflow: auto !important; }
  #sidebar { transform: translateX(-100%); z-index: 3000; }
  #sidebar.closed { transform: translateX(-100%); }
  #main { margin-left: 0 !important; height: 100vh; display: flex; flex-direction: column; }
  #chatBox { flex: 1 1 auto; min-height: 0; overflow-y: auto; }
  #inputArea { flex-shrink: 0; }
  .msg { max-width: 85%; }
}
</style>
</head>
<body class="dark">
<div id="navbar">
  <div class="logo">ü§ñ Protogen AI</div>
  <div id="menuBtn" class="menu" role="button" aria-label="Toggle menu" tabindex="0">‚ò∞</div>
</div>

<div id="sidebar" class="closed" aria-label="Sidebar menu" role="navigation">
  <div class="title">Protogen AI</div>
  <div class="sidebar-info">
    <p><strong>Founder &amp; CEO:</strong> Martin Lutherking Owino</p>
    <p><strong>Co-Founder:</strong> Davies Ongaki</p>
    <p><strong>Manager:</strong> Ramsey John Ng'aNga</p>
  </div>
  <button id="modeToggle" class="button">üåì Toggle Light/Dark</button>
  <select id="personalitySelect" aria-label="Select personality mode">
    <option value="lutherking">‚ú® Lutherking Mode</option>
    <option value="ramsey">üî∑ Ramsey Mode</option>
  </select>
  <button id="aboutBtn" class="button" aria-haspopup="dialog" aria-controls="aboutModal">‚ÑπÔ∏è About Us</button>
</div>

<div id="main">
  <div id="chatBox" role="log" aria-live="polite" aria-atomic="false">
    <div class="msg ai" tabindex="0">
      <div class="avatar">ü§ñ</div>
      <div>
        <strong>Welcome to Protogen AI! üöÄ</strong><br />
        I am here to help you. Ask me anything or type your question below.
      </div>
    </div>
  </div>

  <div id="inputArea">
    <input id="prompt" type="text" placeholder="Type your question here..." autocomplete="off" aria-label="Enter your question" />
    <button id="uploadBtn" aria-label="Upload files">üìé</button>
    <input type="file" id="fileInput" multiple accept="image/*" style="display:none" />
    <button id="sendBtn">Send</button>
  </div>
  <div id="filePreviews"></div>
</div>

<div id="aboutModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="aboutTitle" tabindex="-1" aria-hidden="true">
  <div class="modal-content">
    <h2 id="aboutTitle">About Protogen AI</h2>
    <p><strong>Founder &amp; CEO:</strong> Martin Lutherking Owino</p>
    <p><strong>Co-Founder:</strong> Davies Ongaki</p>
    <p><strong>Manager:</strong> Ramsey John Ng'aNga</p>
    <p><strong>Company:</strong> HECO-AFRICA</p>
    <p style="margin-top:15px;">Advanced AI assistant capable of answering questions on science, math, history, technology, and more!</p>
    <button id="closeAbout">Close</button>
  </div>
</div>

<script>
async function generateAIResponse(q, personality = "lutherking", files = []) {
  const qLower = q.toLowerCase().trim();
  const tone = personality === "ramsey" 
    ? "üî∑ Ramsey Mode: " 
    : "‚ú® Lutherking Mode: ";

  // Expanded example for broad coverage:
  if (!qLower) return `${tone}Please ask a question.`;

  // Quick factual fallback for demonstration:
  if (qLower.includes("who created") || qLower.includes("founder")) {
    return `${tone}Protogen AI was built by Martin Lutherking Owino (Founder & CEO), co-founded by Davies Ongaki, and managed by Ramsey John Ng'ang'a under HECO-AFRICA.`;
  }
  // Add more domain-specific answers here as needed...
  
  // Fallback answer:
  return `${tone}Sorry, I do not have a specific answer, but I can help with science, math, history, technology, and general questions. Please ask something else!`;
}

let currentPersonality = "lutherking";
let uploadedFiles = [];

function displayMessage(sender, text) {
  const chatBox = document.getElementById("chatBox");
  const msg = document.createElement("div");
  msg.className = `msg ${sender}`;
  msg.tabIndex = 0;
  const avatar = document.createElement("div");
  avatar.className = "avatar";
  avatar.textContent = sender === "user" ? "üë§" : "ü§ñ";
  const bubble = document.createElement("div");
  bubble.innerHTML = text.replace(/\n/g, '<br>');
  msg.appendChild(avatar);
  msg.appendChild(bubble);
  chatBox.appendChild(msg);
  chatBox.scrollTop = chatBox.scrollHeight;
  msg.focus();
}

document.getElementById("sendBtn").addEventListener("click", async () => {
  const inputEl = document.getElementById("prompt");
  const input = inputEl.value.trim();
  if (!input) return;
  displayMessage("user", input);
  const chatBox = document.getElementById("chatBox");
  const typing = document.createElement("div");
  typing.className = "typing";
  typing.textContent = "ü§ñ Protogen AI is thinking...";
  chatBox.appendChild(typing);
  chatBox.scrollTop = chatBox.scrollHeight;
  await new Promise(resolve => setTimeout(resolve, 800));
  typing.remove();
  const response = await generateAIResponse(input, currentPersonality, uploadedFiles);
  displayMessage("ai", response);
  inputEl.value = "";
  uploadedFiles = [];
  document.getElementById("filePreviews").innerHTML = "";
});

document.getElementById("prompt").addEventListener("keypress", e => {
  if(e.key === "Enter") document.getElementById("sendBtn").click();
});

document.getElementById("personalitySelect").addEventListener("change", e => {
  currentPersonality = e.target.value;
  displayMessage("ai", `Personality switched to ${e.target.value === "ramsey" ? "üî∑ Ramsey" : "‚ú® Lutherking"} mode!`);
});

document.getElementById("modeToggle").addEventListener("click", () => {
  document.body.classList.toggle("dark");
  document.body.classList.toggle("light");
  const mode = document.body.classList.contains("dark") ? "Dark" : "Light";
  displayMessage("ai", `Switched to ${mode} mode! üåì`);
});

const sidebar = document.getElementById("sidebar");
const menuBtn = document.getElementById("menuBtn");

menuBtn.addEventListener("click", () => {
  sidebar.classList.toggle("closed");
});

// Accessibility: toggle menu with keyboard
menuBtn.addEventListener("keydown", e => {
  if (e.key === "Enter" || e.key === " ") {
    e.preventDefault();
    sidebar.classList.toggle("closed");
  }
});

document.getElementById("aboutBtn").addEventListener("click", () => {
  const modal = document.getElementById("aboutModal");
  modal.classList.add("show");
  modal.setAttribute("aria-hidden", "false");
  modal.focus();
});

document.getElementById("closeAbout").addEventListener("click", () => {
  const modal = document.getElementById("aboutModal");
  modal.classList.remove("show");
  modal.setAttribute("aria-hidden", "true");
  document.getElementById("prompt").focus();
});

document.getElementById("uploadBtn").addEventListener("click", () => {
  document.getElementById("fileInput").click();
});

document.getElementById("fileInput").addEventListener("change", e => {
  const files = [...e.target.files];
  uploadedFiles = files;
  const filePreviews = document.getElementById("filePreviews");
  filePreviews.innerHTML = "";
  files.forEach(file => {
    const reader = new FileReader();
    reader.onload = () => {
      const box = document.createElement("div");
      box.className = "file-preview";
      const img = document.createElement("img");
      img.src = reader.result;
      const remove = document.createElement("button");
      remove.textContent = "‚úñ";
      remove.title = "Remove file preview";
      remove.onclick = () => {
        box.remove();
        uploadedFiles = uploadedFiles.filter(f => f !== file);
      };
      box.appendChild(img);
      box.appendChild(remove);
      filePreviews.appendChild(box);
    };
    reader.readAsDataURL(file);
  });
});
</script>
</body>
</html>
